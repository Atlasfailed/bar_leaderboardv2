# BAR Nation Leaderboard

A Flask web application that tracks and displays player leaderboards, nation rankings, team analysis, and efficiency metrics for the Beyond All Reason (BAR) real-time strategy game.

## Features

- **Player Leaderboard**: Rankings of individual players with performance metrics
- **Nation Rankings**: Country-based rankings using last 7 days of match data
- **Team Analysis**: Roster analysis and team performance insights
- **Efficiency Analysis**: Player efficiency vs speed analysis with visualizations

## Quick Start

### Prerequisites
- Python 3.10+ 
- pip package manager

### Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd bar_deployment
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Generate data files (required):
```bash
python run_all_pipelines.py
```

4. Run the application:
```bash
python app.py
```

The application will be available at `http://localhost:5000`

## Data Pipeline

The application requires data files generated by the pipeline system:

- `python run_all_pipelines.py` - Runs all data processing pipelines
- `python run_pipelinev2.py` - Main leaderboard pipeline  
- `python run_nation_rankings.py` - Nation rankings pipeline
- `python run_team_analysis.py` - Team analysis pipeline

**Note:** You must run `run_all_pipelines.py` before starting the web application to generate required data files.

## Project Structure

```
├── app.py                    # Main Flask application
├── config.py                 # Configuration settings
├── utils.py                  # Utility functions
├── run_all_pipelines.py      # Run all data pipelines
├── nation_ranking_pipeline.py# Nation rankings logic
├── team_analysis.py          # Team analysis logic
├── performance_monitoring.py # Performance tracking
├── static/                   # CSS, JS, images
├── templates/                # HTML templates
├── data/                     # Data files (generated by pipelines)
└── requirements.txt          # Python dependencies
```

## Deployment

### PythonAnywhere Deployment

1. Upload all files to your PythonAnywhere directory
2. Install dependencies: `pip3.10 install --user -r requirements.txt`
3. Run data pipeline: `python3.10 run_all_pipelines.py`
4. Configure WSGI using `wsgi_pythonanywhere.py`
5. Set static files mapping: `/static/` -> `/home/yourusername/mysite/static/`

### Data Updates

To refresh rankings and data:
```bash
python run_all_pipelines.py
```

## Dependencies

Key dependencies include:
- Flask - Web framework
- pandas - Data processing  
- numpy - Numerical computing
- plotly - Interactive visualizations
- flask-cors - Cross-origin resource sharing

See `requirements.txt` for complete list.

## Contributing

1. Ensure data pipelines run successfully
2. Test all web application features
3. Verify deployment compatibility

## License

[Add your license information here]
